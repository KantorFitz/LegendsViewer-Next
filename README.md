[![Bay12Forum Thread](https://img.shields.io/badge/Bay12-Forum-blue.svg)](http://www.bay12forums.com/smf/index.php?topic=154617.0)
[![Build and Test](https://github.com/Kromtec/LegendsViewer-Next/actions/workflows/build-and-test.yml/badge.svg)](https://github.com/Kromtec/LegendsViewer-Next/actions/workflows/build-and-test.yml)
# LegendsViewer-Next

**LegendsViewer-Next** is a tool for visualizing the rich history and data generated by the game **Dwarf Fortress**. This reboot of the original **LegendsViewer** is designed to work with the Steam release of the game and leverages modern technology, including a **.NET 8 backend** and a **Vue 3** / **TypeScript** frontend.

![Worlds Overview - Bookmarks](https://i.imgur.com/8AYxP4v.png "Worlds Overview - Bookmarks")

## Features

- Overview and easy access to already opened worlds with thumbnails and timestamps
- Generated maps from parsed information of the exported XML plus files
- The most important information about a world at a glance
  ![World Summary](https://i.imgur.com/bMa0WATl.png "World Summary")
- Browse through paginated tables of **world objects**, including their historical details
  ![Browse World Objects](https://i.imgur.com/t3JSfTxl.png "Browse World Objects")
- Interactive map powered by **Leaflet.js** for exploring location of sites
  ![Interactive Map](https://i.imgur.com/svKABNGl.png "Interactive Map")
- Look into the family trees of historical figures
  ![Family Tree](https://i.imgur.com/fwDbczfl.png "Family Tree")
- Load large Dwarf Fortress **XML exports** quickly and efficiently using **XmlReader**

## Installation for Development

### Prerequisites

- **.NET 8 SDK**: [Download here](https://dotnet.microsoft.com/download/dotnet/8.0)
- **Node.js**: [Download here](https://nodejs.org/)

### Backend Setup

1. Clone the repository:

   ```bash
   git clone https://github.com/yourusername/LegendsViewer-Next.git
   cd LegendsViewer-Next
   ```
2. Restore and run the backend:
   This should also build the vue3/ts frontend and host it

	```bash
	dotnet restore
	dotnet run
	```
### Frontend Setup
1. Navigate to the frontend directory:

	```bash
	cd LegendsViewer.Frontend/legends-viewer-frontend
	```
2. Install dependencies:

	```bash
	npm install
	```
3. Run the development server:

	```bash
	npm run dev
	```
4. Click on the generated link to open the app in the browser

### Usage
1. Load World Data: Export a world from Dwarf Fortress and upload the XML file in the app.
   1. The export should at least contain `<savename>-<datestamp>-legends.xml`
   2. To properly generate maps and lots more information you need `<savename>-<datestamp>-legends_plus.xml` that is generated when you make the export with DFHack.
2. Explore Maps: Interact with the map to discover sites and their location.
3. Parsed worlds are saved as bookmarks for quick access in future sessions.
4. Switch Between Worlds: Go to the overview and load different worlds, each displayed with their own interactive map and data.

### Contributing
Contributions are welcome! Please follow these steps to contribute:

1. Fork the repository.
2. Create a new branch (git checkout -b feature/my-feature).
3. Make your changes and commit (git commit -am 'Add my feature').
4. Push to the branch (git push origin feature/my-feature).
5. Open a pull request.

### License
This project is licensed under the MIT License - see the LICENSE file for details.
